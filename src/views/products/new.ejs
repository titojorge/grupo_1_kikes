<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head') %>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/register.css">
    <link rel="stylesheet" href="/css/footer.css">
</head>
<body>
  <%- include('../partials/header')%>
    <div class="body">
      <section class="registration-form">
        <h1>Nuevo Producto</h1>
        <form action="/products/new" method="POST" id="form_product" enctype="multipart/form-data">
          <div class="input-form">
            <input type="text" name="name" id="name" placeholder=" " value="<%= oldData.name %>"><br>
            <label for="name">Nombre del producto</label>
          </div>
          <% if( errors.name) { %>
            <div class="text-danger">
              <%= errors.name.msg %>
            </div>
            <% } %>
              <div class="input-form">
                <label class="label-select" for="description">Descripción</label>
                <textarea name="description" id="description" placeholder=" "><%= oldData.description %></textarea><br>
              </div>
              <% if(errors.description) { %>
                <div class="text-danger">
                  <%= errors.description.msg %>
                </div>
                <% } %>
                  <div class="input-form">
                    <label class="label-select" for="image_product">Imagen</label>
                    <input type="file" name="image_product" id="image_product" value="<%= oldData.image_product %>"><br>
                  </div>
                  <% if(errors.image_product) { %>
                    <div class="text-danger">
                      <%= errors.image_product.msg %>
                    </div>
                    <% } %>
                      <div class="input-form">
                        <label class="label-select" for="category_producto_id">Categoría de producto</label>
                        <select name="category_producto_id" id="category_producto_id">
                          <% for( let i=0; i < categorias.length; i++ ) { %>
                            <% if(oldData.category_producto_id==categorias[i].id) { %>
                              <option value="<%= categorias[i].id %>" selected>
                                <%= categorias[i].id %> - <%=categorias[i].nombre %>
                              </option>
                              <% }else{ %>
                                <option value="<%= categorias[i].id %>">
                                  <%= categorias[i].id %> - <%=categorias[i].nombre %>
                                </option>
                                <% } %>
                                  <% } %>
                        </select>
                      </div>
                      <% if(errors.category_producto_id) { %>
                        <div class="text-danger">
                          <%= errors.category_producto_id.msg %>
                        </div>
                        <% } %>
                          <div class="input-form">
                            <input type="number" name="stock" id="stock" step="1" placeholder=" "
                              value="<%= oldData.stock %>"><br>
                            <label for="stock">Stock</label>
                          </div>
                          <% if(errors.stock) { %>
                            <div class="text-danger">
                              <%= errors.stock.msg %>
                            </div>
                            <% } %>
                              <div class="input-form">
                                <label class="label-select" for="type_category">Tipo de Categoría:</label>
                                <select name="type_category" id="type_category">
                                  <% if(oldData.type_category=='in-sale' ) { %>
                                    <option value="in-sale" selected>En Oferta</option>
                                    <option value="visited">Visitado</option>
                                    <% }else{ %>
                                      <option value="in-sale">En Oferta</option>
                                      <option value="visited" selected>Visitado</option>
                                      <% } %>
                                </select><br>
                              </div>
                              <% if(errors.type_category) { %>
                                <div class="text-danger">
                                  <%= errors.type_category.msg %>
                                </div>
                                <% } %>
                                  <div class="input-form">
                                    <input type="number" name="price" id="price" step="0.01" placeholder=" "
                                      value="<%= oldData.price %>"><br>
                                    <label for="price">Precio</label>
                                  </div>
                                  <% if(errors.price) { %>
                                    <div class="text-danger">
                                      <%= errors.price.msg %>
                                    </div>
                                    <% } %>
                                      <div class="input-form">
                                        <input type="number" name="discount" id="discount" step="1" placeholder=" "
                                          value="<%= oldData.discount %>"><br>
                                        <label for="discount">Descuento</label>
                                      </div>
                                      <% if(errors.discount) { %>
                                        <div class="text-danger">
                                          <%= errors.discount.msg %>
                                        </div>
                                        <% } %>
                                          <div>
                                            <ul class="text-danger">

                                            </ul>
                                          </div>
                                          <div class="input-form">
                                            <input type="submit" value="Guardar">
                                          </div>
        </form>
      </section>
    </div>
    <%- include('../partials/footer')%>
      <script src="/js/validateCreateProductF.js"></script>
</body>
</html>